<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CAS-LIF | ä¸»è§‚è®¤çŸ¥ä¸èŠ‚å¾‹çŠ¶æ€</title>
    <style>
        /* å…¨å±€æ ·å¼é…ç½® */
        body { 
            font-family: -apple-system, sans-serif; 
            background: #f8fafc; 
            margin: 0; 
            padding: 20px; 
        }
        .container { 
            max-width: 650px; 
            margin: 20px auto; 
            background: white; 
            padding: 35px 30px; 
            border-radius: 20px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); 
        }
        .module-header { 
            color: #0f172a; 
            margin-top: 0; 
            font-size: 24px; 
            border-bottom: 2px solid #e2e8f0; 
            padding-bottom: 15px; 
            margin-bottom: 25px; 
        }
        
        /* å¯¼èˆªä¸æŒ‰é’® */
        .sys-btn { 
            background: #0f172a; 
            color: white; 
            border: none; 
            padding: 18px 30px; 
            font-size: 16px; 
            font-weight: bold; 
            border-radius: 12px; 
            cursor: pointer; 
            margin: 10px 0; 
            width: 100%; 
            transition: 0.2s; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); 
        }
        .sys-btn:active { transform: scale(0.98); } 
        .hidden { display: none !important; }
        
        #nav-back { 
            display: inline-flex; 
            align-items: center; 
            text-decoration: none; 
            color: #3b82f6; 
            font-weight: bold; 
            margin-bottom: 15px; 
            padding: 10px 18px; 
            background: #eff6ff; 
            border-radius: 10px; 
            transition: 0.2s; 
        } 
        #nav-back:active { background: #dbeafe; }
        
        /* é—®å·ç»„åˆæ ·å¼ (å¢å¼ºè§¦æ§ä½“éªŒ) */
        .q-group { 
            margin-bottom: 25px; 
            padding-bottom: 20px; 
            border-bottom: 1px dashed #e2e8f0; 
        } 
        .q-group:last-child { border-bottom: none; }
        .q-group label { 
            display: block; 
            font-weight: bold; 
            color: #1e293b; 
            margin-bottom: 12px; 
            font-size: 16px; 
            line-height: 1.4; 
        }
        
        /* è¡¨å•è¾“å…¥å…ƒç´ æ ·å¼ */
        select, input[type="time"] { 
            width: 100%; 
            padding: 16px; 
            border-radius: 10px; 
            border: 2px solid #cbd5e1; 
            font-size: 16px; 
            background: #f8fafc; 
            outline: none; 
            transition: 0.2s; 
            box-sizing: border-box; 
        }
        select:focus, input[type="time"]:focus { 
            border-color: #3b82f6; 
            background: white; 
        }
    </style>
    <script src="cas-storage.js"></script>
</head>
<body>
    <div style="text-align: left; max-width: 650px; margin: 0 auto;">
        <a href="index.html" id="nav-back">â† è¿”å›æ§åˆ¶å°</a>
    </div>
    
    <div class="container" id="menu">
        <h2 class="module-header">ğŸŒ™ è¡°é€€é¢„è­¦ä¸ç”Ÿæ´»è´¨æ§</h2>
        <button class="sys-btn" onclick="show('scd-area');">1. SCD-Q ä¸»è§‚è®¤çŸ¥ä¸‹é™é—®å·</button>
        <button class="sys-btn" onclick="show('sleep-area');">2. ç¡çœ ç»“æ„ä¸èŠ‚å¾‹ç‰¹å¾</button>
        <button class="sys-btn" style="background:#3b82f6;" onclick="show('iadl-area');">3. IADL å·¥å…·æ€§æ—¥å¸¸ç”Ÿæ´»èƒ½åŠ›</button>
        <button class="sys-btn" style="background:#3b82f6;" onclick="show('phq-area');">4. PHQ-2 æŠ‘éƒæƒ…ç»ªé‰´åˆ«ç­›æŸ¥</button>
    </div>

    <div class="container hidden" id="scd-area">
        <h2 class="module-header">ä¸»è§‚è®¤çŸ¥ä¸‹é™ (SCD-Q)</h2>
        <div class="q-group">
            <label>1. æ‚¨è§‰å¾—è‡ªå·±çš„è®°å¿†åŠ›æ˜¯å¦æ­£åœ¨ä¸‹é™ï¼Ÿ</label>
            <select id="scd-1">
                <option value="0">æ²¡æœ‰æ˜æ˜¾å˜åŒ–</option>
                <option value="1">å¶å°”æ„Ÿè§‰ä¸‹é™</option>
                <option value="2">æ˜æ˜¾æ„Ÿè§‰ä¸‹é™</option>
            </select>
        </div>
        <div class="q-group">
            <label>2. è¿™ç§è®°å¿†ä¸‹é™æ˜¯å¦å¼•èµ·äº†æ‚¨çš„æ‹…å¿§ï¼Ÿ</label>
            <select id="scd-2">
                <option value="0">å®Œå…¨ä¸æ‹…å¿§</option>
                <option value="1">æœ‰ä¸€ç‚¹æ‹…å¿§</option>
                <option value="2">éå¸¸æ‹…å¿§</option>
            </select>
        </div>
        <button class="sys-btn" style="background:#10b981;" onclick="saveSCD()">âœ“ ä¿å­˜é—®å·</button>
    </div>

    <div class="container hidden" id="sleep-area">
        <h2 class="module-header">ç”Ÿç‰©èŠ‚å¾‹ä¸ç¡çœ </h2>
        <div class="q-group">
            <label>1. è¿‡å»ä¸€ä¸ªæœˆï¼Œæ‚¨é€šå¸¸æ™šä¸Šå‡ ç‚¹å…¥ç¡ï¼Ÿ</label>
            <input type="time" id="slp-1" value="23:00">
        </div>
        <div class="q-group">
            <label>2. ç¡çœ ç¢ç‰‡åŒ–ç¨‹åº¦ (å¤œé—´é€šå¸¸é†’æ¥å‡ æ¬¡ï¼Ÿ)</label>
            <select id="slp-2">
                <option value="0">0æ¬¡ (ä¸€è§‰åˆ°å¤©äº®)</option>
                <option value="1">1-2æ¬¡</option>
                <option value="2">3æ¬¡åŠä»¥ä¸Š</option>
            </select>
        </div>
        <button class="sys-btn" style="background:#10b981;" onclick="saveSleep()">âœ“ ä¿å­˜ç‰¹å¾</button>
    </div>

    <div class="container hidden" id="iadl-area">
        <h2 class="module-header">æ—¥å¸¸ç”Ÿæ´»èƒ½åŠ› (IADL)</h2>
        <p style="color:#64748b; font-size: 14px; margin-top:-10px;">ç”¨äºé‰´åˆ«è½»åº¦è®¤çŸ¥éšœç¢(MCI)ä¸ç—´å‘†ã€‚</p>
        
        <div class="q-group">
            <label>1. è´¢åŠ¡ç®¡ç† (å¦‚ï¼šå»é“¶è¡Œå–é’±ã€è®¡ç®—æ‰¾é›¶ã€æ”¯ä»˜è´¦å•)</label>
            <select id="iadl-1">
                <option value="0">å®Œå…¨ç‹¬ç«‹å®Œæˆ</option>
                <option value="1">éœ€è¦éƒ¨åˆ†ååŠ©æˆ–æé†’</option>
                <option value="2">å®Œå…¨æ— æ³•è‡ªå·±å¤„ç†</option>
            </select>
        </div>
        <div class="q-group">
            <label>2. æŒ‰æ—¶æœè¯ (èƒ½å¦è‡ªå·±è®°ä½æŒ‰æ—¶ã€æŒ‰é‡åƒè¯)</label>
            <select id="iadl-2">
                <option value="0">å®Œå…¨ç‹¬ç«‹å®Œæˆ</option>
                <option value="1">éœ€è¦å®¶äººäº‹å…ˆåˆ†è£…æˆ–æé†’</option>
                <option value="2">å®Œå…¨æ— æ³•è‡ªå·±æœè¯ï¼Œå¿…é¡»ä»–äººå–‚é£Ÿ</option>
            </select>
        </div>
        <div class="q-group">
            <label>3. äº¤é€šå‡ºè¡Œ (èƒ½å¦è‡ªå·±ä¹˜è½¦æˆ–æ‰“è½¦å»ä¸ç†Ÿæ‚‰çš„åœ°æ–¹)</label>
            <select id="iadl-3">
                <option value="0">å®Œå…¨ç‹¬ç«‹è§„åˆ’è·¯çº¿å¹¶å‡ºè¡Œ</option>
                <option value="1">ä»…é™å‘¨å›´éå¸¸ç†Ÿæ‚‰çš„åœ°æ–¹ï¼Œæˆ–åªèƒ½å«è½¦</option>
                <option value="2">å¿…é¡»æœ‰å®¶å±é™ªåŒ</option>
            </select>
        </div>
        <button class="sys-btn" style="background:#10b981;" onclick="saveIADL()">âœ“ ä¿å­˜ IADL è¯„ä¼°</button>
    </div>

    <div class="container hidden" id="phq-area">
        <h2 class="module-header">æƒ…ç»ªç­›æŸ¥ (PHQ-2)</h2>
        <p style="color:#64748b; font-size: 14px; margin-top:-10px;">ç”¨äºæ’é™¤â€œå‡æ€§ç—´å‘†â€å¹²æ‰°ã€‚è¯·å›é¡¾è¿‡å»ä¸¤å‘¨çš„çŠ¶å†µã€‚</p>
        
        <div class="q-group">
            <label>1. åšäº‹æƒ…æ—¶ï¼Œæ˜¯å¦æ„Ÿåˆ°ç¼ºä¹å…´è¶£æˆ–ä¹è¶£ï¼Ÿ</label>
            <select id="phq-1">
                <option value="0">å®Œå…¨æ²¡æœ‰</option>
                <option value="1">æœ‰å‡ å¤©</option>
                <option value="2">ä¸€åŠä»¥ä¸Šçš„å¤©æ•°</option>
                <option value="3">å‡ ä¹æ¯å¤©</option>
            </select>
        </div>
        <div class="q-group">
            <label>2. æ˜¯å¦æ„Ÿåˆ°æƒ…ç»ªä½è½ã€æŠ‘éƒæˆ–ç»æœ›ï¼Ÿ</label>
            <select id="phq-2">
                <option value="0">å®Œå…¨æ²¡æœ‰</option>
                <option value="1">æœ‰å‡ å¤©</option>
                <option value="2">ä¸€åŠä»¥ä¸Šçš„å¤©æ•°</option>
                <option value="3">å‡ ä¹æ¯å¤©</option>
            </select>
        </div>
        <button class="sys-btn" style="background:#10b981;" onclick="savePHQ()">âœ“ ä¿å­˜æƒ…ç»ªç­›æŸ¥</button>
    </div>

    <script>
        // è§†å›¾è·¯ç”±åˆ‡æ¢
        function show(id) { 
            ['menu', 'scd-area', 'sleep-area', 'iadl-area', 'phq-area'].forEach(d => {
                document.getElementById(d).classList.add('hidden');
            }); 
            document.getElementById(id).classList.remove('hidden'); 
            // æ¯æ¬¡åˆ‡æ¢è§†å›¾æ—¶æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨
            window.scrollTo(0,0);
        }

        /* ==================== 1. ä¿å­˜ SCD é—®å·æ•°æ® ==================== */
        function saveSCD() { 
            CAS_Storage.saveModuleData('Lifestyle_SCD', { 
                memory_decline: parseInt(document.getElementById('scd-1').value), 
                worry: parseInt(document.getElementById('scd-2').value) 
            }); 
            alert("ä¸»è§‚è®¤çŸ¥é¢„è­¦å·²åŒæ­¥"); 
            show('menu'); 
        }

        /* ==================== 2. ä¿å­˜ ç¡çœ ä¸èŠ‚å¾‹æ•°æ® ==================== */
        function saveSleep() { 
            CAS_Storage.saveModuleData('Lifestyle_Sleep', { 
                bedtime: document.getElementById('slp-1').value, 
                awakenings: parseInt(document.getElementById('slp-2').value) 
            }); 
            alert("ç”Ÿç‰©èŠ‚å¾‹æ•°æ®å·²åŒæ­¥"); 
            show('menu'); 
        }

        /* ==================== 3. ä¿å­˜ IADL (å·¥å…·æ€§æ—¥å¸¸ç”Ÿæ´»èƒ½åŠ›) ==================== */
        // å¾—åˆ†è¶Šé«˜ä»£è¡¨èƒ½åŠ›å—æŸè¶Šä¸¥é‡ (0ä¸ºæ­£å¸¸ï¼Œæ€»åˆ†æœ€å¤§ä¸º6)
        function saveIADL() {
            let f_score = parseInt(document.getElementById('iadl-1').value);
            let m_score = parseInt(document.getElementById('iadl-2').value);
            let t_score = parseInt(document.getElementById('iadl-3').value);
            
            CAS_Storage.saveModuleData('Lifestyle_IADL', {
                finance: f_score,
                medication: m_score,
                transport: t_score,
                total_score: f_score + m_score + t_score
            });
            alert("IADL èƒ½åŠ›é‰´åˆ«æ•°æ®å·²å…¥åº“ã€‚"); 
            show('menu'); 
        }

        /* ==================== 4. ä¿å­˜ PHQ-2 (æŠ‘éƒç­›æŸ¥) ==================== */
        // PHQ-2 æ€»åˆ†ä¸º 0-6 åˆ†ã€‚ä¸´åºŠä¸Šé€šå¸¸å°†æ€»åˆ† â‰¥ 3 è§†ä¸ºæŠ‘éƒé«˜é£é™©
        function savePHQ() {
            let anhedonia_score = parseInt(document.getElementById('phq-1').value);
            let depressed_score = parseInt(document.getElementById('phq-2').value);
            
            CAS_Storage.saveModuleData('Lifestyle_PHQ2', {
                anhedonia: anhedonia_score,
                depressed_mood: depressed_score,
                total_score: anhedonia_score + depressed_score
            });
            alert("å‡æ€§ç—´å‘†/æƒ…ç»ªç­›æŸ¥æ•°æ®å·²å…¥åº“ã€‚"); 
            show('menu'); 
        }
    </script>
</body>
</html>
