<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NeuroMap - ç¥ç»è¡Œä¸ºå¤šæ¨¡æ€è¯„ä¼°å›¾è°±ç³»ç»Ÿ</title>
    <style>
        /* ==================== æ ¸å¿ƒè‰²å½©ä¸æ’ç‰ˆ (ä¿ç•™åŸç‰ˆ NeuroMap é£æ ¼) ==================== */
        :root { --primary: #1e293b; --blue: #4f46e5; --light-blue: #eef2ff; --green: #10b981; --amber: #f59e0b; --bg: #fcfcfd; --text: #334155; }
        body { font-family: "PingFang SC", sans-serif; background: var(--bg); margin: 0; padding: 20px; color: var(--text); }
        
        header { text-align: center; margin-bottom: 30px; padding: 40px 20px; background: white; border-radius: 24px; box-shadow: 0 10px 40px rgba(79, 70, 229, 0.05); border-top: 6px solid var(--blue); }
        header h1 { margin: 0 0 10px 0; font-size: 28px; color: var(--primary); }
        .eng-title { font-family: monospace; color: var(--blue); font-size: 14px; opacity: 0.8; }

        /* ==================== å»ºæ¡£é¡µé¢ (Setup Container) ==================== */
        #setup-container { max-width: 800px; margin: 0 auto; background: white; padding: 45px; border-radius: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.03); border: 1px solid #f1f5f9; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; }
        .form-group label { display: block; font-weight: bold; margin-bottom: 10px; color: #475569; }
        .form-group input, .form-group select { width: 100%; box-sizing: border-box; padding: 16px; border: 2px solid #e2e8f0; border-radius: 14px; font-size: 16px; background: #f8fafc; outline: none; transition: 0.3s; color: var(--primary); font-weight: 500;}
        .form-group input:focus, .form-group select:focus { border-color: var(--blue); background: white; box-shadow: 0 0 0 4px var(--light-blue); }
        .btn-main { width: 100%; padding: 20px; background: var(--blue); color: white; border: none; border-radius: 16px; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.3s; box-shadow: 0 8px 20px rgba(79, 70, 229, 0.25); }
        .btn-main:hover { transform: translateY(-3px); box-shadow: 0 12px 25px rgba(79, 70, 229, 0.35); }

        /* ==================== ä»»åŠ¡æ§åˆ¶å° (Dashboard Container) ==================== */
        #dashboard-container { display: none; max-width: 1200px; margin: 0 auto; animation: fadeUp 0.6s ease; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .subj-badge { padding: 20px 30px; background: var(--light-blue); color: var(--blue); border-radius: 18px; display: flex; justify-content: space-between; align-items: center; font-weight: bold; margin-bottom: 20px; border: 1px solid #c7d2fe; }

        /* æ–°å¢ï¼šV4.0 EMA ç–²åŠ³å¹²é¢„é¢æ¿ */
        .ema-panel { background: #fffbeb; border: 2px dashed #fcd34d; padding: 20px; border-radius: 18px; text-align: center; margin-bottom: 40px; }

        /* å…­å¤§é¢†åŸŸå¯¼èˆªå¡ç‰‡ */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(360px, 1fr)); gap: 25px; margin-bottom: 40px; }
        .card { background: white; padding: 30px; border-radius: 24px; transition: 0.3s; display: flex; flex-direction: column; text-decoration: none; color: inherit; border: 1px solid #f1f5f9; position: relative; }
        .card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.06); border-color: var(--blue);}
        .card-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .icon { font-size: 38px; background: #f8fafc; padding: 15px; border-radius: 20px; }
        .card h2 { margin: 0; font-size: 20px; color: var(--primary); }
        .domain-desc { font-size: 13.5px; color: #64748b; margin-bottom: 15px; line-height: 1.6; }
        
        .sub-test-list { list-style: none; padding: 0; margin: 0; flex-grow: 1; }
        .sub-test-list li { font-size: 14px; margin-bottom: 8px; font-weight: 500; color: #475569; display: flex; align-items: center;}
        .sub-test-list li::before { content: "â€¢"; font-size: 24px; margin-right: 10px; color: var(--blue); }
        
        .card-action { margin-top: 25px; padding: 16px; text-align: center; border-radius: 14px; font-weight: bold; background: #f8fafc; color: #64748b; transition: 0.3s; border: 2px dashed #e2e8f0;}
        .card:hover .card-action { background: var(--blue); color: white; border-style: solid; }
        
        /* æ–°å¢ï¼šV4.0 çŠ¶æ€è¿½è¸ªå¾½ç«  */
        .status-badge { position: absolute; top: 25px; right: 25px; font-size: 13px; font-weight: bold; padding: 6px 12px; border-radius: 10px; background: #f1f5f9; color: var(--slate); transition: 0.3s;}
        .status-completed { background: #d1fae5; color: #059669; border: 1px solid #34d399;}

        .footer-nav { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    </style>
    <script src="cas-storage.js"></script>
</head>
<body>
    <header>
        <h1>ç¥ç»è¡Œä¸ºå¤šæ¨¡æ€è¯„ä¼°å›¾è°±ç³»ç»Ÿ (NeuroMap)</h1>
        <div class="eng-title">The Neuro-Behavioral Multimodal Assessment Platform</div>
    </header>

    <div id="setup-container">
        <h2>ğŸ“ å—è¯•è€…å»ºæ¡£ (ä¸´åºŠæ ‡å‡†ç‰ˆ)</h2>
        <div class="form-row">
            <div class="form-group">
                <label>è¢«è¯•ç¼–å· ID *</label>
                <input type="text" id="subj-id" placeholder="å¦‚ï¼šCAS_001">
            </div>
            <div class="form-group">
                <label>å§“å / ç¼©å†™ *</label>
                <input type="text" id="subj-name" placeholder="å¦‚ï¼šå¼ ä¸‰ æˆ– ZS">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>å‡ºç”Ÿæ—¥æœŸ *</label>
                <input type="date" id="subj-dob">
            </div>
            <div class="form-group">
                <label>æ€§åˆ« *</label>
                <select id="subj-gender">
                    <option value="">è¯·é€‰æ‹©</option>
                    <option value="Male">ç”· (Male)</option>
                    <option value="Female">å¥³ (Female)</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>åˆ©æ‰‹ (Handedness) *</label>
                <select id="subj-hand">
                    <option value="">è¯·é€‰æ‹©</option>
                    <option value="Right">å³æ‰‹ (Right)</option>
                    <option value="Left">å·¦æ‰‹ (Left)</option>
                </select>
            </div>
            <div class="form-group">
                <label>æ•™è‚²æ°´å¹³ (Education) *</label>
                <select id="subj-edu">
                    <option value="">è¯·é€‰æ‹©</option>
                    <option value="6">å°å­¦åŠä»¥ä¸‹ (â‰¤6å¹´)</option>
                    <option value="9">åˆä¸­ (9å¹´)</option>
                    <option value="12">é«˜ä¸­/ä¸­ä¸“ (12å¹´)</option>
                    <option value="16">æœ¬ç§‘/å¤§ä¸“ (16å¹´)</option>
                    <option value="19">ç ”ç©¶ç”ŸåŠä»¥ä¸Š</option>
                </select>
            </div>
        </div>
        <button class="btn-main" onclick="registerSubject()">é”å®šæ¡£æ¡ˆï¼Œè¿›å…¥å¤šæ¨¡æ€è¯„ä¼°é¢æ¿ â”</button>
    </div>

    <div id="dashboard-container">
        <div class="subj-badge">
            <span>ğŸ‘¤ å½“å‰ä¼šè¯: <span id="display-subj-name"></span> | ä¸´åºŠ ID: <span id="display-subj-id"></span></span>
            <button onclick="CAS_Storage.clearSession()" style="background:white; border:none; color:#f43f5e; padding:8px 16px; border-radius:12px; font-weight:bold; cursor:pointer; box-shadow:0 2px 10px rgba(244,63,94,0.1);">ç»“æŸå¹¶é”€æ¯ä¼šè¯</button>
        </div>

        <div class="ema-panel">
            <strong>ğŸ’¡ ä¸´åºŠå¹²é¢„ï¼šç”Ÿæ€ç¬æ—¶ç–²åŠ³è¯„ä¼° (EMA)</strong><br>
            <span style="font-size:13px; color:#b45309;">è¯·åœ¨å®Œæˆé«˜è´Ÿè·æ¨¡å—åï¼Œä¸»è¯•å¯éšæ—¶æ‹–åŠ¨æ»‘å—è®°å½•å—è¯•è€…å½“ä¸‹çš„è®¤çŸ¥ç–²åŠ³åº¦ã€‚</span><br>
            <div style="display:flex; align-items:center; justify-content:center; gap:15px; margin-top:15px;">
                <input type="range" id="fatigue-slider" min="0" max="100" value="0" style="width: 300px;">
                <button onclick="CAS_Storage.recordFatigue(document.getElementById('fatigue-slider').value); alert('âœ… ä¸»è§‚ç–²åŠ³åº¦è¿½è¸ªå·²æ³¨å…¥æ—¶åºæ•°æ®åº“ï¼');" style="padding: 10px 20px; background: var(--amber); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight:bold;">è®°å½•å…¥åº“</button>
            </div>
        </div>

        <div class="grid">
            <a href="cognition.html" class="card" id="card-cog">
                <div class="status-badge">å¾…æµ‹</div>
                <div class="card-header"><div class="icon">ğŸ§ </div><h2>è®¤çŸ¥ (COG)</h2></div>
                <p class="domain-desc">åŒ…å«ç»å…¸æµ‹éªŒä¸ NIH æ¨èå‰æ²¿æ‰§è¡ŒåŠŸèƒ½èŒƒå¼ã€‚</p>
                <ul class="sub-test-list"><li>Corsi å¹¿åº¦ / Stroop æŠ‘åˆ¶ / TMT-B / DSST</li><li>Flanker ä¾§æŠ‘åˆ¶ / DCCS æŸ”æ€§ / Pattern é€Ÿåº¦</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            
            <a href="emotion.html" class="card" id="card-fer">
                <div class="status-badge">å¾…æµ‹</div>
                <div class="card-header"><div class="icon">â¤ï¸</div><h2>æƒ…æ„Ÿä¸ç¤¾ä¼š (EMO)</h2></div>
                <p class="domain-desc">ç¤¾ä¼šè®¤çŸ¥ç»´åº¦ä¸é¢å­”è¯†åˆ«ç½‘ç»œæå–ã€‚</p>
                <ul class="sub-test-list"><li>FER é¢å­”æƒ…ç»ªè¯†åˆ« (ER-60æ ‡å‡†ç‰ˆ)</li><li>æƒ…ç»ªç‰¹å¼‚æ€§æ··æ·†çŸ©é˜µæµ‹ç®—</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            
            <a href="advanced_emotion.html" class="card" id="card-aemo">
                <div class="status-badge">å¾…æµ‹</div>
                <div class="card-header"><div class="icon">ğŸ­</div><h2>é«˜çº§æƒ…æ„Ÿè®¡ç®— (AEMO)</h2></div>
                <p class="domain-desc">çªç ´ä¸»è§‚é—®å·é˜²å¤‡ï¼Œæ·±å…¥è¯„ä¼°æ½œæ„è¯†åç½®ä¸å‰é¢å¶æŠ‘åˆ¶ã€‚</p>
                <ul class="sub-test-list"><li>ERT è®¤çŸ¥é‡è¯„ / IAT å†…éšè”æƒ³æµ‹éªŒ</li><li>NLP è‡ªåŠ¨äººæ ¼ç”»åƒ / è¯­ä¹‰åç½®æå–</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            
            <a href="motor.html" class="card" id="card-mot">
                <div class="status-badge">å¾…æµ‹</div>
                <div class="card-header"><div class="icon">ğŸ¯</div><h2>è¿åŠ¨å…±æµ (MOT)</h2></div>
                <p class="domain-desc">é¶å‘è¿åŠ¨çš®å±‚ä¸åŸºåº•èŠ‚çš„çº¯è¿åŠ¨èµ·åŠ¨åˆ†æã€‚</p>
                <ul class="sub-test-list"><li>AFT äº¤æ›¿æ•²å‡»ç–²åŠ³åº¦ / SRT ç®€å•ååº”æ—¶</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            
            <a href="gait_imu.html" class="card" id="card-gait">
               <div class="status-badge">å¾…æµ‹</div>
               <div class="card-header"><div class="icon">ğŸš¶â€â™‚ï¸</div><h2>åŒé‡æ­¥æ€ (Gait)</h2></div>
               <p class="domain-desc">åŸºäºæ‰‹æœº IMU æå–è®¤çŸ¥-è¿åŠ¨åŒé‡ä»»åŠ¡ä¸‹çš„å§¿åŠ¿ä¸ç¨³ã€‚</p>
               <ul class="sub-test-list"><li>è‡ªåŠ¨è®°å½•ä¸‰è½´åŠ é€Ÿåº¦é«˜é¢‘æ—¶åº</li><li>å‰ç«¯æå–æ­¥é¢‘ (Cadence) ä¸ CV å˜å¼‚æ€§</li></ul>
              <div class="card-action">å¯åŠ¨æµ‹è¯• (è¯·å°†è®¾å¤‡æ”¾äºå—è¯•è€…å…œå†…)</div>
           </a>
           
            <a href="sensation.html" class="card" id="card-sen">
                <div class="status-badge">å¾…æµ‹</div>
                <div class="card-header"><div class="icon">âš¡</div><h2>æ„Ÿè§‰çŸ¥è§‰ (SEN)</h2></div>
                <p class="domain-desc">åº•å±‚çš„ç¥ç»ä¼ å¯¼åŸºçº¿ä¸è‡ªä¸‹è€Œä¸Šçš„æŒç»­æ³¨æ„åŠ›ã€‚</p>
                <ul class="sub-test-list"><li>PVT ç²¾ç¥è¿åŠ¨è­¦è§‰æ€§æµ‹éªŒ (Lapsesæ¢æµ‹)</li><li>TimeRep å†…éƒ¨æ—¶é—´èŠ‚å¾‹é‡ç°æµ‹éªŒ</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            
            <a href="language.html" class="card" id="card-lan">
                <div class="status-badge">å¾…æµ‹</div>
                <div class="card-header"><div class="icon">ğŸ’¬</div><h2>è¯­è¨€è¯­ä¹‰ (LAN)</h2></div>
                <p class="domain-desc">åŸºäºè¯­éŸ³äº¤äº’çš„è¯­ä¹‰ç½‘ç»œé€šè¾¾åº¦æå–ã€‚</p>
                <ul class="sub-test-list"><li>VFT è¨€è¯­æµç•…æ€§æµ‹éªŒ (60så¼ºåˆ¶é˜»æ–­)</li><li>é¦–è¯æ½œä¼æœŸä¸è¯é—´é—´éš” (IWI) åŠ¨åŠ›å­¦</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            
            <a href="lifestyle.html" class="card" id="card-lif">
                <div class="status-badge">å¾…æµ‹</div>
                <div class="card-header"><div class="icon">ğŸŒ™</div><h2>ç”Ÿæ´»ä¸è¡°é€€ (LIF)</h2></div>
                <p class="domain-desc">MCI çš„ä¸´åºŠé‰´åˆ«è¯Šæ–­ä¸å‡æ€§ç—´å‘†ç­›æŸ¥é˜²çº¿ã€‚</p>
                <ul class="sub-test-list"><li>IADL å·¥å…·èƒ½åŠ› / 24h èƒ½é‡èŠ‚å¾‹æ ‡å°º</li><li>è®°å½•å›ç­”æ—¥å¸¸åŠŸèƒ½é—®é¢˜çš„â€œå†³ç­–è¿Ÿç–‘æ½œä¼æœŸâ€</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            
            <a href="voice_biomarker.html" class="card" id="card-vbm">
               <div class="status-badge">å¾…æµ‹</div>
               <div class="card-header"><div class="icon">ğŸ™ï¸</div><h2>è¯­éŸ³æ ‡å¿—ç‰© (VBM)</h2></div>
               <p class="domain-desc">åŸºäºè®¡ç®—å£°å­¦ä¸å·é¥¼å›¾èŒƒå¼ï¼Œæå–æ‰¾è¯å›°éš¾ç‰¹å¾ã€‚</p>
               <ul class="sub-test-list"><li>Cookie Theft ç»å…¸å›¾ç‰‡è‡ªå‘è¯­éŸ³é‡‡é›†</li><li>å‰ç«¯ VAD åœé¡¿æ¯” (Silence Ratio) æµ‹ç®—</li></ul>
              <div class="card-action">å¯åŠ¨æµ‹è¯• (éœ€è°ƒç”¨éº¦å…‹é£)</div>
           </a>
           
            <a href="dcdt.html" class="card" id="card-dcdt">
              <div class="status-badge">å¾…æµ‹</div>
              <div class="card-header"><div class="icon">âœï¸</div><h2>ä¹¦å†™åŠ¨åŠ›å­¦ (dCDT)</h2></div>
              <p class="domain-desc">å¯¹æ ‡ MIT/MGH çš„æ•°å­—åŒ–ç”»é’Ÿæµ‹è¯•ï¼Œæå–æ—¶ç©ºä¸å‹æ„Ÿç‰¹å¾ã€‚</p>
              <ul class="sub-test-list"><li>ææ—©æœŸæ‰§è¡ŒåŠŸèƒ½é¢„è­¦ (In-air ç©ºä¸­æ€è€ƒæ—¶é—´)</li><li>æ•æ‰è½ç¬”è¿Ÿç¼“ä¸ç»˜å›¾ç»“æ„ç¼ºé™·</li></ul>
             <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            
            <a href="face_rppg.html" class="card" id="card-rppg">
                <div class="status-badge">å¾…æµ‹</div>
                <div class="card-header"><div class="icon">ğŸ¥</div><h2>å½±åƒè¡¨å‹ (PHY)</h2></div>
                <p class="domain-desc">éæ¥è§¦å¼è®°å½•é¢éƒ¨å¾®è¡€ç®¡åºŠçš„é™æ¯æ€è¡€æµåŠ¨åŠ›å­¦ (rPPG)ã€‚</p>
                <ul class="sub-test-list"><li>å‰ç«¯å‰¥ç¦»ç»¿å…‰é€šé“ (Green Channel) è„‰ææ³¢</li><li>è‡ªä¸»ç¥ç»å¿ƒç‡å˜å¼‚æ€§ (RMSSD) å®æ—¶è®¡ç®—</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯• (éœ€è°ƒç”¨å‰ç½®æ‘„åƒå¤´)</div>
            </a> 
            
            <a href="keystroke.html" class="card" id="card-key">
                <div class="status-badge">å¾…æµ‹</div>
                <div class="card-header"><div class="icon">âŒ¨ï¸</div><h2>æŒ‰é”®åŠ¨åŠ›å­¦ (KEY)</h2></div>
                <p class="domain-desc">ç²¾ç¡®è®°å½•æ•²å‡»å±å¹•æ—¶çš„å¾®è§‚æ—¶é—´å·®ï¼Œéšè”½è¯„ä¼°è¿åŠ¨è¿Ÿç¼“ã€‚</p>
                <ul class="sub-test-list"><li>ä¸´åºŠé•¿æ–‡æœ¬æ‰“å­—é‡‡é›†</li><li>æ»ç•™æ—¶é—´å˜å¼‚ç³»æ•° (Dwell CV) ç­›æŸ¥è‚Œå¼ºç›´</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯• (è¯·å…³é—­ä¸­æ–‡è¾“å…¥æ³•)</div>
            </a>
        </div>

        <div class="footer-nav">
            <a href="manual.html" class="btn-main" style="background:#f1f5f9; color:#475569; text-align:center; text-decoration:none; box-shadow:none;">ğŸ“– ä¸´åºŠä¸»è¯•äº¤äº’æŒ‡å— (SOP åŠ¨ç”»ç‰ˆ)</a>
            <a href="report.html" class="btn-main" style="background:var(--green); text-align:center; text-decoration:none;">ğŸ“Š ç»“æŸæµ‹è¯•ï¼Œç”Ÿæˆå¤šæ¨¡æ€ç‰¹å¾å›¾è°± â”</a>
        </div>
    </div>

    <script>
        window.onload = function() {
            // è®¾ç½®å‡ºç”Ÿæ—¥æœŸé€‰æ‹©çš„æœ€é«˜ä¸Šé™ä¸ºä»Šå¤©
            document.getElementById('subj-dob').setAttribute("max", new Date().toISOString().split("T")[0]);
            
            // ä½¿ç”¨ V4.0 æ ‡å‡†åˆ¤æ–­æ˜¯å¦å·²ç»å»ºæ¡£
            const session = CAS_Storage.getSession();
            if (session.demographics && session.demographics.subject_id) {
                // å·²å»ºæ¡£ï¼Œç›´æ¥æ˜¾ç¤º Dashboard
                document.getElementById('setup-container').style.display = 'none'; 
                document.getElementById('dashboard-container').style.display = 'block';
                
                // å¡«å……æ‚£è€…å¾½ç« ä¿¡æ¯
                document.getElementById('display-subj-name').innerText = session.demographics.name || "N/A"; 
                document.getElementById('display-subj-id').innerText = session.demographics.subject_id;

                // æ£€æŸ¥å¹¶ç‚¹äº®å„æ¨¡å—çš„å®ŒæˆçŠ¶æ€å¾½ç« 
                checkAllModules();
            }
        };

        // ç»‘å®š V4.0 åº•å±‚ API ä¿å­˜æ‚£è€…æ•°æ®
        function registerSubject() {
            const data = {
                subject_id: document.getElementById('subj-id').value.trim(),
                name: document.getElementById('subj-name').value.trim(),
                dob: document.getElementById('subj-dob').value,
                gender: document.getElementById('subj-gender').value,
                handedness: document.getElementById('subj-hand').value,
                education_years: parseInt(document.getElementById('subj-edu').value) || 0
            };
            
            if(!data.subject_id || !data.dob || !data.gender || !data.handedness) {
                return alert("âš ï¸ ä¸´åºŠæ ‡å‡†è¦æ±‚ï¼šè¯·å®Œæ•´å¡«å†™æ‰€æœ‰å¸¦æ˜Ÿå· (*) çš„åŸºçº¿åå˜é‡ä¿¡æ¯ï¼");
            }

            // ç›´æ¥å†™å…¥ CAS_Storage åº•å±‚ JSON
            let session = CAS_Storage.getSession();
            session.demographics = data;
            session.last_update = new Date().toISOString();
            localStorage.setItem(CAS_Storage.SESSION_KEY, JSON.stringify(session));
            
            // åˆ·æ–°é¡µé¢å³å¯è‡ªåŠ¨è¿›å…¥ Dashboard
            location.reload();
        }

        // ç»Ÿä¸€çš„ä»»åŠ¡å®ŒæˆçŠ¶æ€æ ¡éªŒå‡½æ•°
        function checkAllModules() {
            const checkStatus = (moduleKeys, domId) => {
                let isCompleted = Array.isArray(moduleKeys) 
                    ? moduleKeys.some(key => CAS_Storage.isModuleCompleted(key))
                    : CAS_Storage.isModuleCompleted(moduleKeys);

                if(isCompleted) {
                    const el = document.getElementById(domId);
                    if(el) {
                        const badge = el.querySelector('.status-badge');
                        badge.innerText = "âœ… å·²å®Œæˆ"; 
                        badge.classList.add('status-completed');
                        el.style.borderColor = "var(--green)";
                    }
                }
            };
            
            // å°† V4.0 çš„ 13ä¸ªåº•å±‚é”®åæ˜ å°„åˆ° 12ä¸ªåŠŸèƒ½å¡ç‰‡ä¸Š
            checkStatus(['COG_Stroop', 'COG_DSST', 'COG_TMT_B', 'COG_Corsi', 'COG_Pattern'], 'card-cog'); 
            checkStatus('Emotion_FER', 'card-fer');
            checkStatus(['AEMO_IAT', 'AEMO_ERT', 'AEMO_LLM_Big5'], 'card-aemo');
            checkStatus(['MOT_AFT', 'MOT_SRT'], 'card-mot');
            checkStatus('MOT_DualTaskGait', 'card-gait');
            checkStatus(['SEN_PVT', 'SEN_TimeRep'], 'card-sen');
            checkStatus('Language_VFT', 'card-lan');
            checkStatus('LIF_Lifestyle', 'card-lif');
            checkStatus('Voice_Biomarkers', 'card-vbm');
            checkStatus('MOT_dCDT', 'card-dcdt');
            checkStatus('PHY_Face_rPPG', 'card-rppg');
            checkStatus('MOT_Keystroke', 'card-key');
        }
    </script>
</body>
</html>
