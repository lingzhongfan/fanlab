<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CAS - ä¸´åºŠç¥ç»å¿ƒç†ä¸æ•°å­—è¡¨å‹è¯„ä¼°</title>
    <style>
        :root { --primary: #1e293b; --blue: #4f46e5; --light-blue: #eef2ff; --bg: #fcfcfd; --text: #334155; }
        body { font-family: "PingFang SC", sans-serif; background: var(--bg); margin: 0; padding: 20px; color: var(--text); }
        
        header { text-align: center; margin-bottom: 30px; padding: 40px 20px; background: white; border-radius: 24px; box-shadow: 0 10px 40px rgba(79, 70, 229, 0.05); border-top: 6px solid var(--blue); }
        header h1 { margin: 0 0 10px 0; font-size: 28px; color: var(--primary); }
        .eng-title { font-family: monospace; color: var(--blue); font-size: 14px; opacity: 0.8; }

        #setup-container { max-width: 800px; margin: 0 auto; background: white; padding: 45px; border-radius: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.03); border: 1px solid #f1f5f9; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; }
        .form-group label { display: block; font-weight: bold; margin-bottom: 10px; color: #475569; }
        .form-group input, .form-group select { width: 100%; box-sizing: border-box; padding: 16px; border: 2px solid #e2e8f0; border-radius: 14px; font-size: 16px; background: #f8fafc; outline: none; transition: 0.3s; }
        .form-group input:focus, .form-group select:focus { border-color: var(--blue); background: white; box-shadow: 0 0 0 4px var(--light-blue); }
        .btn-main { width: 100%; padding: 20px; background: var(--blue); color: white; border: none; border-radius: 16px; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.3s; box-shadow: 0 8px 20px rgba(79, 70, 229, 0.25); }
        .btn-main:hover { transform: translateY(-3px); box-shadow: 0 12px 25px rgba(79, 70, 229, 0.35); }

        #dashboard-container { display: none; max-width: 1200px; margin: 0 auto; animation: fadeUp 0.6s ease; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .subj-badge { padding: 20px 30px; background: var(--light-blue); color: var(--blue); border-radius: 18px; display: flex; justify-content: space-between; align-items: center; font-weight: bold; margin-bottom: 30px; border: 1px solid #c7d2fe; }

        /* å…­å¤§é¢†åŸŸå¯¼èˆªå¡ç‰‡ */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(360px, 1fr)); gap: 25px; margin-bottom: 40px; }
        .card { background: white; padding: 30px; border-radius: 24px; transition: 0.3s; display: flex; flex-direction: column; text-decoration: none; color: inherit; border: 1px solid #f1f5f9; }
        .card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.06); }
        .card-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .icon { font-size: 38px; background: #f8fafc; padding: 15px; border-radius: 20px; }
        .card h2 { margin: 0; font-size: 20px; color: var(--primary); }
        .domain-desc { font-size: 13.5px; color: #64748b; margin-bottom: 15px; line-height: 1.6; }
        
        .sub-test-list { list-style: none; padding: 0; margin: 0; flex-grow: 1; }
        .sub-test-list li { font-size: 14px; margin-bottom: 8px; font-weight: 500; color: #475569; display: flex; align-items: center;}
        .sub-test-list li::before { content: "â€¢"; font-size: 24px; margin-right: 10px; color: var(--blue); }
        
        .card-action { margin-top: 25px; padding: 16px; text-align: center; border-radius: 14px; font-weight: bold; background: #f8fafc; color: #64748b; transition: 0.3s; border: 2px dashed #e2e8f0;}
        .card:hover .card-action { background: var(--blue); color: white; border-style: solid; }
        
        .footer-nav { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    </style>
    <script src="cas-storage.js"></script>
</head>
<body>
    <header><h1>è®¡ç®—ç¥ç»å¿ƒç†ä¸æ•°å­—è¡¨å‹è¯„ä¼°ç³»ç»Ÿ (CAS)</h1><div class="eng-title">Computational Assessment Suite</div></header>

    <div id="setup-container">
        <h2>ğŸ“ å—è¯•è€…å»ºæ¡£ (ç¤¾åŒºç­›æŸ¥ç‰ˆ)</h2>
        <div class="form-row">
            <div class="form-group"><label>è¢«è¯•ç¼–å· ID *</label><input type="text" id="subj-id" placeholder="å¦‚ï¼šCAS_001"></div>
            <div class="form-group"><label>å§“åç¼©å†™ *</label><input type="text" id="subj-name" placeholder="å¦‚ï¼šZS"></div>
        </div>
        <div class="form-row">
            <div class="form-group"><label>å‡ºç”Ÿæ—¥æœŸ *</label><input type="date" id="subj-dob"></div>
            <div class="form-group"><label>æ€§åˆ« *</label><select id="subj-gender"><option value="">é€‰æ‹©</option><option value="Male">ç”·</option><option value="Female">å¥³</option></select></div>
        </div>
        <div class="form-row">
            <div class="form-group"><label>åˆ©æ‰‹ (Handedness) *</label><select id="subj-hand"><option value="">é€‰æ‹©</option><option value="Right">å³æ‰‹</option><option value="Left">å·¦æ‰‹</option></select></div>
            <div class="form-group"><label>æ•™è‚²æ°´å¹³ (Education) *</label><select id="subj-edu"><option value="">é€‰æ‹©</option><option value="Primary">å°å­¦åŠä»¥ä¸‹ (â‰¤6å¹´)</option><option value="Middle">åˆä¸­ (9å¹´)</option><option value="High">é«˜ä¸­/ä¸­ä¸“ (12å¹´)</option><option value="Bachelor">æœ¬ç§‘/å¤§ä¸“ (16å¹´)</option><option value="Master">ç ”ç©¶ç”ŸåŠä»¥ä¸Š</option></select></div>
        </div>
        <button class="btn-main" onclick="registerSubject()">è¿›å…¥æ ‡å‡†åŒ–è¯„ä¼°é¢æ¿ â”</button>
    </div>

    <div id="dashboard-container">
        <div class="subj-badge">
            <span>ğŸ‘¤ å½“å‰ä¼šè¯: <span id="display-subj-name"></span> | ID: <span id="display-subj-id"></span></span>
            <button onclick="CAS_Storage.clearSession()" style="background:white; border:none; color:#f43f5e; padding:8px 16px; border-radius:12px; font-weight:bold; cursor:pointer;">ç»“æŸä¼šè¯</button>
        </div>

        <div class="grid">
            <a href="cognition.html" class="card">
                <div class="card-header"><div class="icon">ğŸ§ </div><h2>è®¤çŸ¥ (COG)</h2></div>
                <p class="domain-desc">åŒ…å«ç»å…¸æµ‹éªŒä¸ NIH æ¨èå‰æ²¿æ‰§è¡ŒåŠŸèƒ½èŒƒå¼ã€‚</p>
                <ul class="sub-test-list"><li>Corsi å¹¿åº¦ / Stroop æŠ‘åˆ¶ / TMT-B / DSST</li><li>Flanker ä¾§æŠ‘åˆ¶ / DCCS æŸ”æ€§ / Pattern é€Ÿåº¦</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            <a href="emotion.html" class="card">
                <div class="card-header"><div class="icon">â¤ï¸</div><h2>æƒ…æ„Ÿä¸ç¤¾ä¼š (EMO)</h2></div>
                <p class="domain-desc">æƒ…ç»ªçŠ¶æ€ã€å¿ƒç†å¹¸ç¦æ„Ÿä¸ç¤¾ä¼šè®¤çŸ¥ç»´åº¦æå–ã€‚</p>
                <ul class="sub-test-list"><li>EMA+ çŠ¶æ€ä¸å¹¸ç¦æ„Ÿ / ç¤¾ä¼šå…³ç³»æ”¯æŒ / Big5</li><li>FER é¢å­”æƒ…ç»ªè¯†åˆ« / BART å†³ç­– / Emo-Stroop</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            <a href="motor.html" class="card">
                <div class="card-header"><div class="icon">ğŸ¯</div><h2>è¿åŠ¨å…±æµ (MOT)</h2></div>
                <p class="domain-desc">é¶å‘è¿åŠ¨çš®å±‚ä¸åŸºåº•èŠ‚çš„å¾®å°éœ‡é¢¤ä¸åè°ƒåˆ†æã€‚</p>
                <ul class="sub-test-list"><li>Tapping ç–²åŠ³åº¦ / Fitts é¶å‘ / Spiral éœ‡é¢¤è½¨è¿¹</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            <a href="sensation.html" class="card">
                <div class="card-header"><div class="icon">âš¡</div><h2>æ„Ÿè§‰çŸ¥è§‰ (SEN)</h2></div>
                <p class="domain-desc">åº•å±‚çš„ç¥ç»ä¼ å¯¼åŸºçº¿ä¸è‡ªä¸‹è€Œä¸Šçš„æ³¨æ„åŠ›æ‰«æã€‚</p>
                <ul class="sub-test-list"><li>Simple & Choice RT ååº”æ—¶ / Go-NoGo æŠ‘åˆ¶</li><li>Visual Search ç‰¹å¾è§†è§‰æœç´¢</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            <a href="language.html" class="card">
                <div class="card-header"><div class="icon">ğŸ’¬</div><h2>è¯­è¨€è¯­ä¹‰ (LAN)</h2></div>
                <p class="domain-desc">åŸºäºè¯­éŸ³äº¤äº’çš„è¯­ä¹‰ç½‘ç»œé€šè¾¾åº¦æå–ã€‚</p>
                <ul class="sub-test-list"><li>VFT æµç•…æ€§ (è¯­éŸ³) / BNT å›¾ç‰‡å‘½å / è¯­ä¹‰å…³è”</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            <a href="lifestyle.html" class="card">
                <div class="card-header"><div class="icon">ğŸŒ™</div><h2>ç”Ÿæ´»ä¸è¡°é€€ (LIF)</h2></div>
                <p class="domain-desc">MCI çš„ä¸´åºŠé‰´åˆ«è¯Šæ–­ä¸å‡æ€§ç—´å‘†ç­›æŸ¥é˜²çº¿ã€‚</p>
                <ul class="sub-test-list"><li>SCD-Q ä¸»è§‚ä¸‹é™ / IADL å·¥å…·èƒ½åŠ›</li><li>Sleep èŠ‚å¾‹ä¸ RBD / PHQ-2 æŠ‘éƒæ’æŸ¥</li></ul>
                <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
            </a>
            <a href="voice_biomarker.html" class="card">
               <div class="card-header"><div class="icon">ğŸ™ï¸</div><h2>è¯­éŸ³æ ‡å¿—ç‰© (VBM)</h2></div>
               <p class="domain-desc">åŸºäºè®¡ç®—å£°å­¦ä¸å·é¥¼å›¾èŒƒå¼ï¼Œæå–æ—©æœŸè½»åº¦è®¤çŸ¥éšœç¢çš„å‰¯è¯­è¨€ç‰¹å¾ã€‚</p>
               <ul class="sub-test-list">
              <li>Cookie Theft å·é¥¼å›¾è‡ªå‘è¯­éŸ³é‡‡é›†</li>
              <li>å‰ç«¯ VAD åœé¡¿æ¯”æµ‹ç®— / åç«¯ç‰¹å¾æ¥å£</li>
              </ul>
              <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
           </a>
              <a href="dcdt.html" class="card">
              <div class="card-header"><div class="icon">âœï¸</div><h2>ä¹¦å†™åŠ¨åŠ›å­¦ (dCDT)</h2></div>
              <p class="domain-desc">å¯¹æ ‡ MIT/MGH çš„æ•°å­—åŒ–ç”»é’Ÿæµ‹è¯•ï¼Œæå–æ—¶ç©ºä¸å‹æ„Ÿç‰¹å¾ã€‚</p>
              <ul class="sub-test-list">
             <li>æ•æ‰ç¬”ç”»å‹åŠ›ä¸å¾®é¢¤ç‰¹å¾</li>
             <li>ææ—©æœŸæ‰§è¡ŒåŠŸèƒ½é¢„è­¦ (ç©ºä¸­æ€è€ƒæ—¶é—´)</li>
             </ul>
             <div class="card-action">å¯åŠ¨æµ‹è¯•</div>
             </a>
        </div>
        <div class="footer-nav">
            <a href="manual.html" class="btn-main" style="background:#f1f5f9; color:#475569; text-align:center; text-decoration:none; box-shadow:none;">ğŸ“– ä¸´åºŠä¸»è¯•äº¤äº’æŒ‡å— (åŠ¨ç”»ç‰ˆ)</a>
            <a href="report.html" class="btn-main" style="text-align:center; text-decoration:none;">ğŸ“Š ç»“æŸæµ‹è¯•ï¼Œè¿›å…¥æ•°æ®è§£æä¸å¯¼å‡ºä¸­å¿ƒ</a>
        </div>
    </div>

    <script>
        window.onload = function() {
            document.getElementById('subj-dob').setAttribute("max", new Date().toISOString().split("T")[0]);
            if (CAS_Storage.hasSession()) {
                document.getElementById('setup-container').style.display = 'none'; 
                document.getElementById('dashboard-container').style.display = 'block';
                const session = CAS_Storage.getSession();
                document.getElementById('display-subj-name').innerText = session.demographics.name; 
                document.getElementById('display-subj-id').innerText = session.demographics.subject_id;
            }
        };

        function registerSubject() {
            const data = {
                subject_id: document.getElementById('subj-id').value, name: document.getElementById('subj-name').value,
                dob: document.getElementById('subj-dob').value, gender: document.getElementById('subj-gender').value,
                handedness: document.getElementById('subj-hand').value, education_level: document.getElementById('subj-edu').value 
            };
            if(!data.subject_id || !data.dob || !data.education_level || !data.handedness) return alert("âš ï¸ è¯·å®Œæ•´å¡«å†™å¸¦æ˜Ÿå·çš„åŸºçº¿åå˜é‡ä¿¡æ¯");
            CAS_Storage.initSession(data); location.reload();
        }
    </script>
</body>
</html>
