<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CAS - å¤šæ¨¡æ€æ•°å­—è¡¨å‹è¯„ä¼°ç³»ç»Ÿ</title>
    <style>
        /* ==================== 1. å…¨å±€è®¾è®¡è§„èŒƒ ==================== */
        :root { 
            --primary: #0f172a; 
            --blue: #3b82f6; 
            --purple: #8b5cf6;
            --green: #10b981;
            --bg: #f8fafc; 
            --text: #334155; 
            --muted: #64748b; 
        }
        body { 
            font-family: -apple-system, "PingFang SC", sans-serif; 
            background: var(--bg); 
            color: var(--text); 
            margin: 0; padding: 20px; 
            -webkit-tap-highlight-color: transparent; 
        }
        
        header { 
            text-align: center; margin-bottom: 30px; padding: 35px 20px; 
            background: white; border-radius: 16px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.04); border-top: 6px solid var(--primary); 
        }
        header h1 { margin: 0 0 8px 0; font-size: 26px; color: var(--primary); }
        .eng-title { font-family: monospace; color: var(--blue); font-size: 13px; display: block; }
        
        /* ==================== 2. å»ºæ¡£è¡¨å• ==================== */
        #setup-container { 
            max-width: 700px; margin: 30px auto; background: white; padding: 40px; 
            border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
        }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .form-group label { display: block; font-weight: bold; font-size: 14px; margin-bottom: 8px; color: #1e293b; }
        .form-group input, .form-group select { 
            width: 100%; box-sizing: border-box; padding: 14px; border: 2px solid #cbd5e1; 
            border-radius: 10px; font-size: 16px; background: #f8fafc; 
        }
        .submit-btn { 
            width: 100%; padding: 18px; background: var(--blue); color: white; border: none; 
            border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; 
            transition: 0.2s; box-shadow: 0 4px 15px rgba(59,130,246,0.3); 
        }

        /* ==================== 3. è¯„ä¼°çœ‹æ¿ä»ªè¡¨ç›˜ ==================== */
        #dashboard-container { display: none; animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; } }
        
        .subj-badge { 
            max-width: 1200px; margin: 0 auto 25px auto; padding: 15px 20px; 
            background: #e0f2fe; color: #0369a1; border-radius: 12px; 
            display: flex; justify-content: space-between; align-items: center; 
            font-weight: bold; border: 1px solid #bae6fd; 
        }

        /* å…­å¤§é¢æ¿ç½‘æ ¼ - æ ¸å¿ƒä¼˜åŒ–éƒ¨åˆ† */
        .grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); 
            gap: 25px; 
            max-width: 1200px; 
            margin: 0 auto; 
        }
        .card { 
            background: white; padding: 25px; border-radius: 20px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.03); 
            text-decoration: none; color: inherit; 
            border: 2px solid transparent; transition: 0.3s; 
            display: flex; flex-direction: column; 
            height: 100%; /* ç¡®ä¿å¡ç‰‡ç­‰é«˜ */
            box-sizing: border-box;
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 12px 25px rgba(0,0,0,0.08); }

        /* é¢æ¿ä¸»é¢˜è‰²å®šä¹‰ */
        .card.cog { border-top: 5px solid var(--blue); }
        .card.emo { border-top: 5px solid #ef4444; }
        .card.mot { border-top: 5px solid #f59e0b; }
        .card.sen { border-top: 5px solid #fbbf24; }
        .card.lan { border-top: 5px solid var(--purple); }
        .card.lif { border-top: 5px solid var(--green); }

        .card-header { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; } 
        .icon { font-size: 32px; } 
        .card h2 { color: var(--primary); margin: 0; font-size: 20px; }
        .domain-desc { font-size: 13.5px; color: var(--muted); margin: 0 0 18px 0; line-height: 1.6; min-height: 45px; }
        
        .sub-test-list { list-style: none; padding: 0; margin: 0; flex-grow: 1; } 
        .sub-test-list li { 
            font-size: 14.5px; color: var(--text); margin-bottom: 12px; 
            display: flex; align-items: center; font-weight: 500; 
        } 
        .sub-test-list li::before { 
            content: "â€¢"; font-size: 20px; margin-right: 10px; 
        }
        /* ä¸ºåˆ—è¡¨ç‚¹å¢åŠ ä¸»é¢˜è‰² */
        .cog li::before { color: var(--blue); }
        .emo li::before { color: #ef4444; }
        .mot li::before { color: #f59e0b; }
        .sen li::before { color: #fbbf24; }
        .lan li::before { color: var(--purple); }
        .lif li::before { color: var(--green); }

        /* å¼•å¯¼æŒ‰é’®ç»Ÿä¸€ä¼˜åŒ– */
        .card-action {
            margin-top: 20px; padding: 14px; 
            text-align: center; border-radius: 12px;
            font-weight: bold; font-size: 15px; transition: 0.2s;
            border: 1px dashed #cbd5e1; background: #f8fafc;
        }
        .cog .card-action { color: var(--blue); }
        .emo .card-action { color: #ef4444; }
        .mot .card-action { color: #f59e0b; }
        .sen .card-action { color: #fbbf24; }
        .lan .card-action { color: var(--purple); }
        .lif .card-action { color: var(--green); }

        /* æ‚¬åœæ—¶çš„æŒ‰é’®å˜æ¢ */
        .card:hover .card-action { border-style: solid; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }

        .data-btn { 
            display: flex; justify-content: center; align-items: center; gap: 10px; 
            max-width: 1200px; margin: 40px auto; padding: 22px; 
            background: var(--blue); color: white; border-radius: 15px; 
            text-decoration: none; font-size: 18px; font-weight: bold; 
            box-shadow: 0 4px 15px rgba(59,130,246,0.3); 
        }
    </style>
    <script src="cas-storage.js"></script>
</head>
<body>
    <header>
        <h1>è®¡ç®—ç¥ç»å¿ƒç†ä¸æ•°å­—è¡¨å‹è¯„ä¼°ç³»ç»Ÿ (CAS)</h1>
        <span class="eng-title">Computational Assessment Suite for Digital Phenotyping</span>
    </header>

    <div id="setup-container">
        <h2>ğŸ“ å—è¯•è€…å»ºæ¡£</h2>
        <div class="form-row">
            <div class="form-group"><label>è¢«è¯•ç¼–å· (ID) *</label><input type="text" id="subj-id" placeholder="å¦‚ï¼šCAS_001"></div>
            <div class="form-group"><label>å§“åæ‹¼éŸ³/ç¼©å†™ *</label><input type="text" id="subj-name" placeholder="å¦‚ï¼šZhangSan"></div>
        </div>
        <div class="form-row">
            <div class="form-group"><label>å‡ºç”Ÿå¹´æœˆæ—¥ *</label><input type="date" id="subj-dob" min="1900-01-01"></div>
            <div class="form-group"><label>æ€§åˆ« *</label><select id="subj-gender"><option value="">è¯·é€‰æ‹©...</option><option value="Male">ç”·</option><option value="Female">å¥³</option></select></div>
        </div>
        <div class="form-row">
            <div class="form-group"><label>åˆ©æ‰‹ *</label><select id="subj-hand"><option value="">è¯·é€‰æ‹©...</option><option value="Right">å³æ‰‹</option><option value="Left">å·¦æ‰‹</option><option value="Ambidextrous">åŒåˆ©æ‰‹</option></select></div>
            <div class="form-group"><label>æ•™è‚²å¹´é™</label><input type="number" id="subj-edu" placeholder="16"></div>
        </div>
        <button class="submit-btn" onclick="registerSubject()">âœ“ ä¿å­˜ä¿¡æ¯å¹¶å¼€å¯ä¼šè¯</button>
    </div>

    <div id="dashboard-container">
        <div class="subj-badge">
            <span>å½“å‰å¯¹è±¡: <span id="display-subj-name"></span> (ID: <span id="display-subj-id"></span>)</span>
            <button onclick="CAS_Storage.clearSession()" style="background:white; border:1px solid #0369a1; color:#0369a1; padding:6px 12px; border-radius:8px; cursor:pointer; font-weight:bold;">ç»“æŸä¼šè¯</button>
        </div>

        <div class="grid">
            <a href="cognition.html" class="card cog">
                <div class="card-header"><div class="icon">ğŸ§ </div><h2>è®¤çŸ¥ (CAS-COG)</h2></div>
                <p class="domain-desc">è¯„ä¼°æ‰§è¡Œæ§åˆ¶ã€å·¥ä½œè®°å¿†å¹¿åº¦ä¸ä¿¡æ¯å¤„ç†é€Ÿåº¦ã€‚</p>
                <ul class="sub-test-list">
                    <li>Corsi ç©ºé—´å·¥ä½œè®°å¿†</li>
                    <li>Stroop æ‰§è¡ŒæŠ‘åˆ¶æµ‹è¯•</li>
                    <li>TMT-B è®¤çŸ¥æŸ”æ€§è¿çº¿</li>
                    <li>DSST æ•°å­—ç¬¦å·è½¬æ¢</li>
                </ul>
                <div class="card-action">è¿›å…¥ è®¤çŸ¥ æµ‹è¯•é¢æ¿ â”</div>
            </a>
            
            <a href="emotion.html" class="card emo">
                <div class="card-header"><div class="icon">â¤ï¸</div><h2>æƒ…æ„Ÿ (CAS-EMO)</h2></div>
                <p class="domain-desc">é‡åŒ–æƒ…ç»ªçŠ¶æ€ã€äººæ ¼ç‰¹è´¨åŠé£é™©åå¥½ã€‚</p>
                <ul class="sub-test-list">
                    <li>EMA è¿ç»­ç¬æ—¶çŠ¶æ€è¯„ä¼°</li>
                    <li>Big 5 äººæ ¼ç‰¹è´¨é‡è¡¨</li>
                    <li>BART æ°”çƒæ¨¡æ‹Ÿé£é™©å†³ç­–</li>
                    <li>Emotional Stroop æ³¨æ„åå‘</li>
                </ul>
                <div class="card-action">è¿›å…¥ æƒ…æ„Ÿ æµ‹è¯•é¢æ¿ â”</div>
            </a>
            
            <a href="motor.html" class="card mot">
                <div class="card-header"><div class="icon">ğŸ¯</div><h2>è¿åŠ¨ (CAS-MOT)</h2></div>
                <p class="domain-desc">ç²¾å‡†æ•æ‰è¿åŠ¨åè°ƒã€é¢‘ç‡åŠé«˜é¢‘éœ‡é¢¤ç‰¹å¾ã€‚</p>
                <ul class="sub-test-list">
                    <li>Simple Tapping è¿åŠ¨ç–²åŠ³åº¦</li>
                    <li>Fitts' Law é¶å‘åè°ƒæ€§</li>
                    <li>Archimedean èºæ—‹çº¿éœ‡é¢¤åˆ†æ</li>
                </ul>
                <div class="card-action">è¿›å…¥ è¿åŠ¨ æµ‹è¯•é¢æ¿ â”</div>
            </a>
            
            <a href="sensation.html" class="card sen">
                <div class="card-header"><div class="icon">âš¡</div><h2>æ„Ÿè§‰çŸ¥è§‰ (CAS-SEN)</h2></div>
                <p class="domain-desc">è¯„ä¼°è§†è§‰ä¿¡æ¯å¤„ç†æ•ˆç‡ä¸æ„Ÿè§‰æŠ‘åˆ¶ç½‘ç»œã€‚</p>
                <ul class="sub-test-list">
                    <li>Simple RT / Choice RT ååº”æ—¶</li>
                    <li>Go/No-Go å†²åŠ¨æŠ‘åˆ¶æ§åˆ¶</li>
                    <li>Visual Search è§†è§‰æœç´¢</li>
                </ul>
                <div class="card-action">è¿›å…¥ æ„Ÿè§‰ æµ‹è¯•é¢æ¿ â”</div>
            </a>
            
            <a href="language.html" class="card lan">
                <div class="card-header"><div class="icon">ğŸ’¬</div><h2>è¯­è¨€ (CAS-LAN)</h2></div>
                <p class="domain-desc">è¯„ä¼°è¯æ±‡æ£€ç´¢ã€å‘½åæ—¶å»¶åŠå†…éƒ¨è¯­ä¹‰ç½‘ç»œè¿é€šæ€§ã€‚</p>
                <ul class="sub-test-list">
                    <li>VFT è¯æ±‡æµç•…æ€§æå–</li>
                    <li>Naming å›¾ç‰‡æ•°å­—åŒ–å‘½å</li>
                    <li>Semantic è¯­ä¹‰å…³è”ä¸æŠ½è±¡åˆ¤åˆ«</li>
                </ul>
                <div class="card-action">è¿›å…¥ è¯­è¨€ æµ‹è¯•é¢æ¿ â”</div>
            </a>
            
            <a href="lifestyle.html" class="card lif">
                <div class="card-header"><div class="icon">ğŸŒ™</div><h2>ç”Ÿæ´»ä¸»è§‚ (CAS-LIF)</h2></div>
                <p class="domain-desc">é‡‡é›†ä¸»è§‚è®¤çŸ¥è¯„ä»·ã€æ—¥å¸¸åŠŸèƒ½é‰´åˆ«åŠèŠ‚å¾‹æŒ‡æ ‡ã€‚</p>
                <ul class="sub-test-list">
                    <li>SCD-Q ä¸»è§‚è®¤çŸ¥ä¸‹é™è‡ªè¯„</li>
                    <li>ç¡çœ ç»“æ„ä¸ç”Ÿç‰©èŠ‚å¾‹ç‰¹å¾</li>
                    <li>IADL å·¥å…·æ€§æ—¥å¸¸ç”Ÿæ´»èƒ½åŠ›è¯„ä¼°</li>
                    <li>PHQ-2 æŠ‘éƒæƒ…ç»ªé‰´åˆ«ç­›æŸ¥</li>
                </ul>
                <div class="card-action">è¿›å…¥ ç”Ÿæ´» æµ‹è¯•é¢æ¿ â”</div>
            </a>
        </div>
        
        <a href="report.html" class="data-btn">ğŸ“Š è¿›å…¥ä¸´åºŠæ•°æ®ä¸­å¿ƒ (æŸ¥çœ‹ 22 é¡¹æµ‹è¯•è¿›åº¦)</a>
    </div>

    <script>
        window.onload = function() {
            const today = new Date().toISOString().split("T")[0];
            document.getElementById('subj-dob').setAttribute("max", today);

            if (CAS_Storage.hasSession()) {
                document.getElementById('setup-container').style.display = 'none'; 
                document.getElementById('dashboard-container').style.display = 'block';
                const session = CAS_Storage.getSession();
                document.getElementById('display-subj-name').innerText = session.demographics.name; 
                document.getElementById('display-subj-id').innerText = session.demographics.subject_id;
            }
        };

        function registerSubject() {
            const id = document.getElementById('subj-id').value.trim();
            const name = document.getElementById('subj-name').value.trim();
            const dob = document.getElementById('subj-dob').value;
            const gender = document.getElementById('subj-gender').value;
            const hand = document.getElementById('subj-hand').value;
            if(!id || !name || !dob || !gender || !hand) return alert("âš ï¸ è¯·å®Œæ•´å¡«å†™å¿…å¡«é¡¹ï¼");
            
            CAS_Storage.initSession({ subject_id: id, name: name, dob: dob, gender: gender, handedness: hand, education_years: document.getElementById('subj-edu').value });
            location.reload();
        }
    </script>
</body>
</html>
