<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CAS - å¤šæ¨¡æ€æ•°å­—è¡¨å‹è¯„ä¼°ç³»ç»Ÿ</title>
    <style>
        :root { --primary: #0f172a; --blue: #3b82f6; --bg: #f8fafc; --text: #334155; --muted: #64748b; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; -webkit-tap-highlight-color: transparent; }
        header { text-align: center; margin-bottom: 25px; padding: 35px 20px; background: white; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.04); border-top: 6px solid var(--primary); }
        header h1 { margin: 0 0 8px 0; font-size: 26px; color: var(--primary); }
        header p { margin: 0; font-size: 15px; color: var(--muted); }
        .eng-title { font-family: monospace; color: var(--blue); font-size: 13px; margin-top: 8px; display: block; }
        
        #setup-container { max-width: 700px; margin: 30px auto; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        #setup-container h2 { margin-top: 0; color: var(--primary); border-bottom: 2px solid #e2e8f0; padding-bottom: 15px; margin-bottom: 25px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .form-group label { display: block; font-weight: bold; font-size: 14px; margin-bottom: 8px; color: #1e293b; }
        .form-group label span { color: #ef4444; }
        .form-group input, .form-group select { width: 100%; box-sizing: border-box; padding: 14px; border: 2px solid #cbd5e1; border-radius: 10px; font-size: 16px; transition: 0.2s; background: #f8fafc; }
        .form-group input:focus, .form-group select:focus { border-color: var(--blue); background: white; outline: none; }
        .submit-btn { width: 100%; padding: 18px; background: var(--blue); color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 15px rgba(59,130,246,0.3); }
        .submit-btn:hover { background: #2563eb; transform: translateY(-2px); }
        .submit-btn:active { transform: translateY(0); }

        #dashboard-container { display: none; animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .tutorial-container { max-width: 1200px; margin: 0 auto 30px auto; background: white; border-radius: 16px; display: flex; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.03); border: 1px solid #e2e8f0; flex-wrap: wrap; }
        .manual-section { flex: 1.5; padding: 30px; background: #f8fafc; border-right: 1px solid #e2e8f0; min-width: 300px; }
        .manual-section h3 { margin-top: 0; color: var(--primary); }
        .manual-list { padding-left: 20px; color: var(--muted); font-size: 14.5px; line-height: 1.8; margin: 0; }
        .manual-list li span { font-weight: bold; color: var(--blue); }
        .anim-section { flex: 1; padding: 30px; display: flex; justify-content: space-around; align-items: center; background: white; min-width: 300px; }
        .tutorial-step { text-align: center; } .tutorial-step h4 { margin: 15px 0 0 0; font-size: 14px; color: var(--primary); }
        
        /* çº¯ CSS åŠ¨ç”»ç»„ä»¶ */
        .anim-box { width: 60px; height: 60px; margin: 0 auto; background: #f1f5f9; border-radius: 12px; position: relative; display: flex; align-items: center; justify-content: center; border: 2px solid #e2e8f0; }
        .anim-cursor { position: absolute; font-size: 20px; z-index: 10; animation: moveClick 3s infinite ease-in-out; }
        .anim-btn { width: 30px; height: 15px; background: #cbd5e1; border-radius: 4px; animation: btnPress 3s infinite ease-in-out; }
        .anim-target { width: 20px; height: 20px; border-radius: 50%; background: #ef4444; animation: targetChange 3s infinite ease-in-out; }
        .anim-data { font-size: 24px; animation: dataFloat 3s infinite ease-in-out; } .anim-folder { position: absolute; bottom: 5px; font-size: 30px; color: #cbd5e1; }
        @keyframes moveClick { 0% { top: 40px; left: 40px; opacity: 0; } 20% { top: 30px; left: 30px; opacity: 1; } 40%, 60% { top: 20px; left: 20px; transform: scale(0.8); } 80% { top: 40px; left: 40px; opacity: 0; } 100% { opacity: 0; } }
        @keyframes btnPress { 0%, 45% { background: #cbd5e1; transform: scale(1); } 50%, 60% { background: var(--blue); transform: scale(0.95); } 65%, 100% { background: #cbd5e1; transform: scale(1); } }
        @keyframes targetChange { 0%, 45% { background: #ef4444; transform: scale(1); } 50%, 80% { background: #10b981; transform: scale(1.1); box-shadow: 0 0 10px rgba(16,185,129,0.4); } 100% { background: #ef4444; transform: scale(1); } }
        @keyframes dataFloat { 0% { transform: translateY(-15px); opacity: 0; } 30% { transform: translateY(-5px); opacity: 1; } 70%, 100% { transform: translateY(10px) scale(0.5); opacity: 0; } }

        .subj-badge { max-width: 1200px; margin: 0 auto 25px auto; padding: 15px 20px; background: #e0f2fe; color: #0369a1; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; font-weight: bold; font-size: 15px; border: 1px solid #bae6fd; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto; }
        .card { background: white; padding: 25px; border-radius: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.03); text-decoration: none; color: inherit; border: 2px solid transparent; transition: 0.2s; display: flex; flex-direction: column; }
        .card:hover { transform: translateY(-5px); border-color: var(--blue); box-shadow: 0 12px 20px rgba(59,130,246,0.1); }
        .card:active { transform: translateY(-2px); }
        .card-header { display: flex; align-items: center; gap: 15px; margin-bottom: 10px; } .icon { font-size: 40px; } .card h2 { color: var(--primary); margin: 0; font-size: 20px; }
        .domain-desc { font-size: 13.5px; color: #94a3b8; margin: 0 0 15px 0; padding-bottom: 15px; border-bottom: 1px solid #e2e8f0; line-height: 1.5; }
        .sub-test-list { list-style: none; padding: 0; margin: 0; flex-grow: 1; } .sub-test-list li { font-size: 14.5px; color: var(--text); margin-bottom: 12px; display: flex; align-items: center; font-weight: 500; } .sub-test-list li::before { content: "â€¢"; color: var(--blue); font-size: 22px; margin-right: 10px; }
        .data-btn { display: flex; justify-content: center; align-items: center; gap: 10px; max-width: 1200px; margin: 35px auto; padding: 22px; background: var(--blue); color: white; border-radius: 12px; text-decoration: none; font-size: 18px; font-weight: bold; box-shadow: 0 4px 15px rgba(59,130,246,0.3); transition: 0.2s; } .data-btn:hover { background: #2563eb; transform: translateY(-2px); }
    </style>
    <script src="cas-storage.js"></script>
</head>
<body>
    <header>
        <h1>è®¡ç®—ç¥ç»å¿ƒç†ä¸æ•°å­—è¡¨å‹è¯„ä¼°ç³»ç»Ÿ (CAS)</h1>
        <p>æ”¯æŒå¤šæ¨¡æ€é«˜ç»´ç‰¹å¾æå–çš„ä¸´åºŠçº§è®¤çŸ¥è¯„ä¼°ç»„åˆ</p>
        <span class="eng-title">Computational Assessment Suite for Digital Phenotyping</span>
    </header>

    <div id="setup-container">
        <h2>ğŸ“ å—è¯•è€…å»ºæ¡£ (Subject Registration)</h2>
        <div class="form-row">
            <div class="form-group"><label>è¢«è¯•ç¼–å· (ID) <span>*</span></label><input type="text" id="subj-id" placeholder="å¦‚ï¼šCAS_001"></div>
            <div class="form-group"><label>å§“åæ‹¼éŸ³/ç¼©å†™ <span>*</span></label><input type="text" id="subj-name" placeholder="å¦‚ï¼šZhangSan"></div>
        </div>
        <div class="form-row">
            <div class="form-group"><label>å‡ºç”Ÿå¹´æœˆæ—¥ <span>*</span></label><input type="date" id="subj-dob"></div>
            <div class="form-group"><label>æ€§åˆ« <span>*</span></label><select id="subj-gender"><option value="">è¯·é€‰æ‹©...</option><option value="Male">ç”·</option><option value="Female">å¥³</option></select></div>
        </div>
        <div class="form-row">
            <div class="form-group"><label>åˆ©æ‰‹ (Handedness) <span>*</span></label><select id="subj-hand"><option value="">è¯·é€‰æ‹©...</option><option value="Right">å³æ‰‹</option><option value="Left">å·¦æ‰‹</option><option value="Ambidextrous">åŒåˆ©æ‰‹</option></select></div>
            <div class="form-group"><label>å—æ•™è‚²å¹´é™</label><input type="number" id="subj-edu" placeholder="å¦‚ï¼š16" min="0" max="30"></div>
        </div>
        <button class="submit-btn" onclick="registerSubject()">âœ“ ä¿å­˜åŸºçº¿ä¿¡æ¯å¹¶å¼€å¯ä¼šè¯</button>
    </div>

    <div id="dashboard-container">
        <div class="tutorial-container">
            <div class="manual-section">
                <h3>ğŸ“‹ ä¸´åºŠä¸»è¯•æ“ä½œæ‰‹å†Œ</h3>
                <ul class="manual-list">
                    <li><span>ç¡¬ä»¶å»ºè®®ï¼š</span>æ¨èä½¿ç”¨ <strong>iPad æˆ–è§¦æ§å±è®¾å¤‡</strong>ï¼ˆæ¨ªå±æ˜¾ç¤ºï¼‰ï¼Œä»¥ä¿éšœæ—¶ç©ºç‰¹å¾é‡‡é›†çš„é«˜åˆ†è¾¨ç‡ä¸ç¨³å®šå¸§ç‡ã€‚</li>
                    <li><span>æ“ä½œå¼•å¯¼ï¼š</span>æ¨¡å—å¯æŒ‰éœ€æ— åºé€‰æ‹©ã€‚è¿›å…¥å…·ä½“ä»»åŠ¡å‰ï¼Œè¯·ä¸»è¯•åŠ¡å¿…ç¡®è®¤å—è¯•è€…å·²ç†è§£é¡¶éƒ¨çš„æ–‡å­—æŒ‡ä»¤ã€‚</li>
                    <li><span>æ•°æ®å½’æ¡£ï¼š</span>æ‰€æœ‰ 19 é¡¹æµ‹è¯•å®Œæˆåï¼Œé€šè¿‡åº•éƒ¨æŒ‰é’®è¿›å…¥ã€æ•°æ®ä¸­å¿ƒã€‘ç»Ÿä¸€å¯¼å‡º AI æ ¼å¼æ•°æ®é›†ã€‚</li>
                </ul>
            </div>
            <div class="anim-section">
                <div class="tutorial-step"><div class="anim-box"><div class="anim-btn"></div><div class="anim-cursor">ğŸ‘†</div></div><h4>1. è¿›å…¥æ¨¡å—</h4></div>
                <div class="tutorial-step"><div class="anim-box"><div class="anim-target"></div><div class="anim-cursor" style="animation-delay: 0.2s;">ğŸ‘†</div></div><h4>2. å¼•å¯¼äº¤äº’</h4></div>
                <div class="tutorial-step"><div class="anim-box"><div class="anim-folder">ğŸ“</div><div class="anim-data">ğŸ“„</div></div><h4>3. å¯¼å‡ºç‰¹å¾</h4></div>
            </div>
        </div>

        <div class="subj-badge">
            <span>å½“å‰æµ‹è¯•å¯¹è±¡: <span id="display-subj-name" style="color:#0f172a; margin:0 15px 0 5px;"></span> ID: <span id="display-subj-id" style="color:#0f172a; font-family:monospace; margin-left:5px;"></span></span>
            <button onclick="CAS_Storage.clearSession()" style="background:white; border:1px solid #0369a1; color:#0369a1; padding:6px 15px; border-radius:8px; cursor:pointer; font-weight:bold; transition:0.2s;">ç»“æŸä¼šè¯</button>
        </div>

        <div class="grid">
            <a href="cognition.html" class="card">
                <div class="card-header"><div class="icon">ğŸ§ </div><h2>è®¤çŸ¥ (CAS-COG)</h2></div>
                <p class="domain-desc">é¶å‘é¢å¶ä¸æµ·é©¬ä½“ç½‘ç»œï¼Œè¯„ä¼°æ‰§è¡Œæ§åˆ¶ã€å·¥ä½œè®°å¿†å¹¿åº¦ã€è®¤çŸ¥æŸ”æ€§åŠä¿¡æ¯å¤„ç†é€Ÿåº¦ï¼Œå¯¹æ—©æœŸè½»åº¦è®¤çŸ¥éšœç¢æå…·æ•æ„Ÿæ€§ã€‚</p>
                <ul class="sub-test-list"><li>Corsi ç©ºé—´å·¥ä½œè®°å¿†</li><li>Stroop æ‰§è¡Œæ§åˆ¶ä¸æŠ‘åˆ¶</li><li>TMT-B è¿çº¿æµ‹è¯• (ä»»åŠ¡åˆ‡æ¢)</li><li>DSST æ•°å­—ç¬¦å·è½¬æ¢</li></ul>
            </a>
            <a href="emotion.html" class="card">
                <div class="card-header"><div class="icon">â¤ï¸</div><h2>æƒ…æ„Ÿ (CAS-EMO)</h2></div>
                <p class="domain-desc">é¶å‘è¾¹ç¼˜ç³»ç»Ÿã€‚ç»“åˆä¸»è§‚é‡è¡¨ä¸å®¢è§‚è¡Œä¸ºèŒƒå¼ï¼Œé‡åŒ–æƒ…ç»ªçŠ¶æ€ã€äººæ ¼ç‰¹è´¨ã€é£é™©åå¥½åŠæ½œåœ¨çš„æ³¨æ„åå‘ã€‚</p>
                <ul class="sub-test-list"><li>EMA è¿ç»­ç¬æ—¶çŠ¶æ€è¯„ä¼°</li><li>Big 5 äººæ ¼ç‰¹è´¨é‡è¡¨</li><li>BART æ°”çƒæ¨¡æ‹Ÿé£é™©å†³ç­–</li><li>Emotional Stroop æ³¨æ„åå‘</li></ul>
            </a>
            <a href="motor.html" class="card">
                <div class="card-header"><div class="icon">ğŸ¯</div><h2>è¿åŠ¨ (CAS-MOT)</h2></div>
                <p class="domain-desc">é¶å‘è¿åŠ¨çš®å±‚ä¸å°è„‘ç½‘ç»œã€‚è®°å½•é«˜é¢‘è§¦å±è½¨è¿¹ä¸æ—¶å»¶ï¼Œç²¾å‡†æ•æ‰å¾®å¼±å…±æµå¤±è°ƒã€è¿åŠ¨è¿Ÿç¼“ä¸éœ‡é¢¤ç‰¹å¾ã€‚</p>
                <ul class="sub-test-list"><li>Simple Tapping è¿åŠ¨ç–²åŠ³åº¦</li><li>Fitts' Law é¶å‘åè°ƒæ€§</li><li>Archimedean èºæ—‹çº¿å¾®å†™ç—‡åˆ†æ</li></ul>
            </a>
            <a href="sensation.html" class="card">
                <div class="card-header"><div class="icon">âš¡</div><h2>æ„Ÿè§‰ä¸çŸ¥è§‰ (CAS-SEN)</h2></div>
                <p class="domain-desc">åˆ†ç¦»ç¥ç»ä¼ å¯¼åŸºçº¿ä¸é«˜çº§è®¤çŸ¥å†³ç­–è€—æ—¶ã€‚è¯„ä¼°è§†è§‰ä¿¡æ¯å¤„ç†æ•ˆç‡ã€æ„Ÿè§‰è¿åŠ¨æŠ‘åˆ¶ç½‘ç»œä¸ç‰¹å¾æœç´¢èƒ½åŠ›ã€‚</p>
                <ul class="sub-test-list"><li>Simple RT (åŸºçº¿ä¼ å¯¼ååº”)</li><li>Choice RT (çŸ¥è§‰å†³ç­– DDM)</li><li>Go/No-Go (æ„Ÿè§‰æŠ‘åˆ¶æ§åˆ¶)</li><li>Visual Search (æ³¨æ„åŠ›æ‰«æ)</li></ul>
            </a>
            <a href="language.html" class="card" style="border-top: 4px solid #8b5cf6;">
                <div class="card-header"><div class="icon">ğŸ’¬</div><h2>è¯­è¨€ (CAS-LAN)</h2></div>
                <p class="domain-desc">é¶å‘å·¦é¢å¶ä¸å¼“çŠ¶æŸã€‚é€šè¿‡è¯æ±‡æ£€ç´¢é€Ÿåº¦çš„éçº¿æ€§å˜åŒ–ä¸å›¾åƒå‘½åæå–æ•ˆç‡ï¼Œé‡åŒ–å†…éƒ¨è¯­ä¹‰ç½‘ç»œçš„ç‰©ç†è¿é€šæ€§ã€‚</p>
                <ul class="sub-test-list"><li>VFT è¯æ±‡æµç•…æ€§ (è¯­ä¹‰æå–)</li><li>Naming å›¾ç‰‡å‘½å (å‘½åæ—¶å»¶)</li></ul>
            </a>
            <a href="lifestyle.html" class="card" style="border-top: 4px solid #10b981;">
                <div class="card-header"><div class="icon">ğŸŒ™</div><h2>ä¸»è§‚ä¸èŠ‚å¾‹ (CAS-LIF)</h2></div>
                <p class="domain-desc">é‡‡é›†ä¸»è§‚è®¤çŸ¥ä¸‹é™ (SCD) çš„è‡ªè¯„é¢„è­¦ä¿¡å·ï¼Œä»¥åŠä¸å¼‚å¸¸è›‹ç™½æ²‰ç§¯å¼ºç›¸å…³çš„ç¡çœ ç¢ç‰‡åŒ–åŠç”Ÿç‰©èŠ‚å¾‹å¤±è°ƒæŒ‡æ ‡ã€‚</p>
                <ul class="sub-test-list"><li>SCD-Q ä¸»è§‚è®¤çŸ¥è¡°é€€è‡ªè¯„</li><li>å¾®å‹ç¡çœ ç»“æ„ä¸èŠ‚å¾‹è´¨æ§</li></ul>
            </a>
        </div>
        <a href="report.html" class="data-btn"><span>ğŸ“Š</span> è¿›å…¥ä¸´åºŠæ•°æ®ä¸­å¿ƒ (æŸ¥çœ‹æµ‹è¯•è¿›åº¦ä¸æ±‡æ€»å¯¼å‡º)</a>
    </div>

    <script>
        window.onload = function() {
            if (CAS_Storage.hasSession()) {
                document.getElementById('setup-container').style.display = 'none'; document.getElementById('dashboard-container').style.display = 'block';
                const session = CAS_Storage.getSession();
                document.getElementById('display-subj-name').innerText = session.demographics.name; document.getElementById('display-subj-id').innerText = session.session_id;
            } else { document.getElementById('setup-container').style.display = 'block'; document.getElementById('dashboard-container').style.display = 'none'; }
        };
        function registerSubject() {
            const id = document.getElementById('subj-id').value.trim(), name = document.getElementById('subj-name').value.trim(), dob = document.getElementById('subj-dob').value, gender = document.getElementById('subj-gender').value, hand = document.getElementById('subj-hand').value, edu = document.getElementById('subj-edu').value;
            if(!id || !name || !dob || !gender || !hand) return alert("âš ï¸ è¯·å®Œæ•´å¡«å†™æ‰€æœ‰å¸¦ * çš„å¿…å¡«é¡¹ï¼");
            CAS_Storage.initSession({ subject_id: id, name: name, dob: dob, gender: gender, handedness: hand, education_years: edu ? parseInt(edu) : null });
            document.getElementById('setup-container').style.display = 'none'; document.getElementById('display-subj-name').innerText = name; document.getElementById('display-subj-id').innerText = id; document.getElementById('dashboard-container').style.display = 'block';
        }
    </script>
</body>
</html>
